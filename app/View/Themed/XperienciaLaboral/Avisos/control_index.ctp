<style>	.inactivo{background-color: rgba(251, 199, 199, 1)!important;}</style><script>$(document).ready(function(){	$('#btn-filtros').click(function(){		$('#filtros-container').modal('show');	});		$('a.favorite').click(function(){		ToggleFav($(this).attr('id'));	});		/* Tooltips */	$('#botonera button').tooltip({container: 'body'});	$('.acciones a').tooltip();});function Filtrar(){	$('#filtros').submit();}function LimpiarFiltros(filtrar){	$('#filtros').trigger("reset");	$("#filtros").find('input:text, input:password, input:file, select, textarea, input:hidden').val('');	if(filtrar){		Filtrar();	}}function ToggleFav(id){	$.post('<?php echo $this->Html->Url(array('controller'=>'avisos','action'=>'control_destacado')); ?>/'+id,function(response){		if(response != 'error'){			if($('#'+id).hasClass('glyphicon-star-empty')){				$('#'+id).removeClass('glyphicon-star-empty');				$('#'+id).addClass('glyphicon-star');			}else{				$('#'+id).addClass('glyphicon-star-empty');				$('#'+id).removeClass('glyphicon-star');			}		}	});}function ToggleActive(id){	$.post('<?php echo $this->Html->Url(array('controller'=>'avisos','action'=>'control_toggle_active',)); ?>/'+id,function(response){		if(response != 'error'){			if(response == 'on'){				$('#aviso-'+id).removeClass('inactivo');			}else{				$('#aviso-'+id).addClass('inactivo');			}		}	});}function TogglePreferidos(){	LimpiarFiltros(false);	$('#AvisoDestacado').val('1');	Filtrar();}</script><div class="col-md-12">	<h1 style="float: left; margin: 10px 0px;">Avisos</h1>		<div id="botonera" style="float: right; margin: 10px 0px;" class="btn-group botonera">		<button type="button" data-toggle="tooltip" data-placement="bottom" title="Todos" onClick="LimpiarFiltros(true);" class="btn btn-default glyphicon glyphicon-asterisk"></button>		<button type="button" data-toggle="tooltip" data-placement="bottom" title="Destacados" onClick="TogglePreferidos();" class="btn btn-default glyphicon glyphicon-star"></button>			<button type="button" data-toggle="tooltip" data-placement="bottom" title="Filtro avanzado" id="btn-filtros" class="btn btn-primary glyphicon glyphicon-search"></button>	</div>	<br><br><br>	<h5 id="n-resultados"><?php echo $this->Paginator->counter('Se encontraron {:count} resultados'); ?></h5>		<table class="table">			<thead>			<tr>				<th><?php echo $this->Paginator->sort('destacado', 'Destacado'); ?></th>				<th><?php echo $this->Paginator->sort('id', 'ID'); ?></th>				<th><?php echo $this->Paginator->sort('puesto', 'Puesto'); ?></th>				<th><?php echo $this->Paginator->sort('aplicantes_count', 'Cantidad de postulantes'); ?></th>				<th>Empresa (Nombre comercial)</th>				<th>Acciones</th>			</tr>		</thead>				<tbody>			<?php foreach($avisos as $aviso){ ?>				<tr id="aviso-<?php echo $aviso['Aviso']['id']; ?>" class="<?php echo($aviso['Aviso']['habilitado']=='0'?'inactivo':''); ?>">					<?php $class = ($aviso['Aviso']['destacado']? 'glyphicon-star' : 'glyphicon-star-empty'); ?>					<td><a href="javascript:void(0);" id="<?php echo $aviso['Aviso']['id']; ?>" class="favorite glyphicon <?php echo $class; ?>"></a></td>					<td><?php echo $aviso['Aviso']['id']; ?></td>					<td><?php echo $aviso['Aviso']['puesto']; ?></td>					<td><?php echo $aviso['Aviso']['aplicantes_count']; ?></td>					<td><?php echo $aviso['Empresa']['nombre_comercial']; ?></td>					<td class="acciones">						<?php //echo $this->Html->link('','javascript:void(0);',array('onClick'=>'VerUsuarios('.$aviso['Empresa']['id'].');','class'=>'glyphicon glyphicon-user','data-toggle'=>'tooltip','data-placement'=>'bottom','title'=>'Ver Usuarios')); ?>						<?php echo $this->Html->link('','javascript:void(0);',array('onClick'=>'ToggleActive('.$aviso['Aviso']['id'].');','class'=>'glyphicon glyphicon-ban-circle','data-toggle'=>'tooltip','data-placement'=>'bottom','title'=>'Activar/Desactivar')); ?>						<?php //echo $this->Html->link('',array('controller'=>'productos','action'=>'control_compras',$aviso['Empresa']['id']),array('class'=>'glyphicon glyphicon-usd','data-toggle'=>'tooltip','data-placement'=>'bottom','title'=>'Compras')); ?>					</td>				</tr>			<?php } ?>		</tbody>			</table>		<?php echo $this->Paginator->numbers(); ?></div><!-- Filtros --><div class="modal fade" id="filtros-container" tabindex="-1" role="dialog" aria-labelledby="filtros-containerLabel" aria-hidden="true">  <div class="modal-dialog">    <div class="modal-content">      <div class="modal-header">        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Cerrar</span></button>        <h4 class="modal-title" id="filtros-containerLabel">Filtros</h4>      </div>		<div class="modal-body">			<form id="filtros" role="form" class="form-personal" style="padding: 0px;" action="<?php echo $this->here; ?>" method="post">				<?php echo $this->Form->input("Aviso.destacado", array('type'=>'hidden')); ?>				<h3>Datos del Aviso</h3>				<div class="form-group">					<?php echo $this->Form->input("Aviso.puesto", array('class'=>'botonplano inputplano form-control','label' => 'Puesto','type'=>'text')); ?>									</div>				<h3>Datos de la Empresa</h3>				<div class="form-group">					<?php echo $this->Form->input("Empresa.nombre_comercial", array('class'=>'botonplano inputplano form-control','label' => 'Nombre comercial')); ?>					<?php echo $this->Form->input("Empresa.razon_social", array('class'=>'botonplano inputplano form-control','label' => 'RazÃ³n social')); ?>					<?php echo $this->Form->input("Empresa.industria_id", array('class'=>'botonplano inputplano form-control','label' => 'Industria', 'options' => $industrias, 'empty'=>'-- Todas las industrias --')); ?>				</div>			</form>		</div>		<div class="modal-footer">			<button type="button" class="btn btn-default" onClick="LimpiarFiltros();">Limpiar filtros</button>			<button type="button" class="btn btn-primary" onClick="Filtrar();">Filtrar</button>		</div>    </div>  </div></div>